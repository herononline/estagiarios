<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Por que Go - Tutorial Backend</title>
    <style>
        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fafafa;
            color: #333;
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        
        h3 {
            color: #7f8c8d;
        }
        
        blockquote {
            background: #ecf0f1;
            border-left: 5px solid #3498db;
            margin: 20px 0;
            padding: 15px;
            font-style: italic;
        }
        
        code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        
        pre code {
            background: transparent;
            padding: 0;
        }
        
        ul {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
        }
        
        a {
            color: #3498db;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        .line-numbers {
            counter-reset: line-numbering;
            white-space: pre;
        }
        
        .line-numbers code::before {
            content: counter(line-numbering);
            counter-increment: line-numbering;
            padding-right: 1em;
            width: 25px;
            text-align: right;
            opacity: 0.5;
            display: inline-block;
            color: #ccc;
            background: none;
            margin-right: 16px;
            padding: 2px 10px 2px 0;
            border-right: 1px solid #666;
        }
    </style>
</head>
<body>
    <h1>Por que Go</h1>
    <blockquote>pq eu gosto</blockquote>

    <p>Mentira, n√£o √© isso n√£o. Na verdade eu acho que Go √© uma boa linguagem pra iniciantes porque ela √© muito simples, tem uma boa biblioteca padr√£o (n√£o precisa instalar muita coisa), e tamb√©m exp√µe algumas coisas que outras linguagens de programa√ß√£o v√£o esconder pra voc√™s ou at√© deixar de forma opcional.</p>

    <p>Go usa um coletor de lixo (garbage collector) <a href="https://pt.wikipedia.org/wiki/Coletor_de_lixo_(inform%C3%A1tica)" target="_blank">https://pt.wikipedia.org/wiki/Coletor_de_lixo_(inform√°tica)</a></p>

    <p>Ent√£o voc√™s n√£o v√£o precisar se preocupar tanto com gerenciamento de mem√≥ria manual. Isso √© bom porque outras linguagens como C e C++ requerem esse gerenciamento de mem√≥ria manual, ent√£o se voc√™s alocarem algo na heap precisariam desalocar. No Go isso √© coletado automaticamente pelo coletor de lixo, e voc√™s ainda conseguem trabalhar para manter coisas na stack, ent√£o d√° pra garantir um desempenho legal.</p>

    <p>Go √© uma das linguagens "novas" (acho que √© de 2009 ou 2010 ahsudha) famosinhas para backend e servi√ßos da web/cloud, j√° que ela nasceu pra resolver v√°rios problemas que a Google enfrentava na √©poca, ent√£o Go √© gostosinho de programar.</p>

    <div class="warning">
        <strong>Aviso:</strong> Me avisem se voc√™s n√£o souberem o que √© stack ou heap, mas isso n√£o √© uma coisa que voc√™s precisam saber muito no mundo moderno (mas bons programadores sabem o que √© isso viu viu viu viu üëÄ), ainda mais se estiverem com linguagens como Python e JavaScript hauhauh.
    </div>

    <h2>O programinha que criamos</h2>

    <blockquote>
        Antes s√≥ queria deixar claro que Go √© uma linguagem com uma biblioteca padr√£o muito rica, ent√£o d√° pra fazer muita coisa sem instalar nada de fora. Inclusive voc√™s poderiam fazer esse servi√ßo web usando apenas a biblioteca padr√£o com o <code>net/http</code> do Go. Essas bibliotecas que vamos usar apenas facilitam isso, porque o net/http segue a ideia de ser algo muito simples, ent√£o para um servi√ßo da web ela poderia exigir muito c√≥digo que essas bibliotecas j√° implementam (inclusive o Gin usa net/http por baixo dos panos).
    </blockquote>

    <p>Vou seguir o c√≥digo com voc√™s comentando cada parte:</p>

    <pre><code>package main

import (
  "net/http"

  "github.com/gin-gonic/gin"
)

func main() {
  r := gin.Default()
  r.GET("/ping", func(c *gin.Context) {
    c.JSON(http.StatusOK, gin.H{
      "message": "pong",
    })
  })
  r.Run() // listen and serve on 0.0.0.0:8080 (for windows "localhost:8080")
}</code></pre>

    <h3>Package main</h3>
    <pre><code>package main</code></pre>
    <p>Esse √© o ponto de entrada do seu programa Go. Praticamente todo programa Go tem um package main e uma fun√ß√£o main(), aqui √© o entrypoint para o programa que vai ser compilado.</p>

    <h3>Imports</h3>
    <pre><code>import (
  "net/http"

  "github.com/gin-gonic/gin"
)</code></pre>

    <p>Essas s√£o as importa√ß√µes que fazemos para esse programa. Se voc√™s leram a paradinha que falei dos m√≥dulos Go, v√£o reparar que <code>github.com/gin-gonic/gin</code> √© um m√≥dulo externo. Go √© diferente do Node.js, que tem um registry padr√£o. No Go voc√™ pode hospedar seu c√≥digo onde quiser, Go vai fazer um fetch nas depend√™ncias e adicionar ao seu projeto.</p>

    <p>Isso √© muito bom! De vez em quando voc√™s v√£o ouvir que o NPM foi hackeado, ou t√° fora do ar, ou que tal biblioteca infectada afetou milh√µes de projetos hasuhau. No Go voc√™ tem controle total de onde vai botar seu c√≥digo para outras pessoas usarem. Voc√™ pode at√© mesmo deixar ele privado, apagar a biblioteca pra sempre (no NPM existem regras pra isso). Enfim, voc√™ tem muito controle.</p>

    <p>Ent√£o sempre que voc√™s virem um m√≥dulo que √© um link, significa que √© uma depend√™ncia externa e o caminho √© onde o Go vai baixar o c√≥digo. Voc√™s podem at√© mesmo abrir o link e conferir todo o c√≥digo da biblioteca <code>github.com/gin-gonic/gin</code>.</p>

    <p>O <code>net/http</code> n√£o possui um link de registry porque ele faz parte da biblioteca padr√£o do Go. Ela √© instalada na m√°quina de voc√™s junto com a instala√ß√£o do Compilador, ent√£o ela t√° dispon√≠vel pra todo mundo que programa em Go :)</p>

    <h3>Fun√ß√£o Main</h3>
    <pre><code>func main() {</code></pre>
    <p><code>func main()</code> define a fun√ß√£o main, o entrypoint para o c√≥digo do seu programa.</p>

    <h3>O C√≥digo Principal</h3>
    <pre><code>r := gin.Default()
r.GET("/ping", func(c *gin.Context) {
  c.JSON(http.StatusOK, gin.H{
    "message": "pong",
  })
})
r.Run() // listen and serve on 0.0.0.0:8080 (for windows "localhost:8080")</code></pre>

    <p><code>r := gin.Default()</code> essa √© a sintaxe do Go para <strong>declara√ß√£o</strong> + <strong>defini√ß√£o</strong>. Normalmente voc√™s v√£o ver linguagens fazendo algo como <code>var/const/let/type = valor</code>. Se voc√™s n√£o sabem a diferen√ßa de declara√ß√£o para defini√ß√£o, me perguntem a√≠ que eu explico (eu realmente n√£o sei como foram as aulas de voc√™s hfaudshfua).</p>

    <p>Enfim, nessa fun√ß√£o basicamente cria e retorna uma inst√¢ncia do Gin (framework que estamos usando). Se voc√™s passarem o mouse na fun√ß√£o (<code>.Default()</code>), voc√™s conseguem ver a documenta√ß√£o dela. Voc√™s tamb√©m podem clicar nela com o bot√£o direito e pular para defini√ß√£o, com o c√≥digo fonte da biblioteca e o texto da documenta√ß√£o explicando a fun√ß√£o:</p>

    <pre><code>// Default returns an Engine instance with the Logger and Recovery middleware already attached.
func Default(opts ...OptionFunc) *Engine {
    debugPrintWARNINGDefault()
    engine := New()
    engine.Use(Logger(), Recovery())
    return engine.With(opts...)
}</code></pre>

    <p>S√≥ mostrei isso porque essa √© uma das filosofias do Go: o c√≥digo das bibliotecas est√° dispon√≠vel pra voc√™. Ent√£o se voc√™ usa uma biblioteca, voc√™ tem todo o c√≥digo dela, e n√£o apenas cabe√ßalhos e defini√ß√µes como em JavaScript ou C.</p>

    <h3>Definindo a Rota</h3>
    <pre><code>r.GET("/ping", func(c *gin.Context) {
  c.JSON(http.StatusOK, gin.H{
    "message": "pong",
  })
})</code></pre>

    <p>Aqui chamamos a nossa engine que colocamos o nome de <code>r</code>, que √© do tipo <code>*gin.Engine</code>. J√° que ela √© uma engine, podemos usar um dos m√©todos de uma <code>gin.Engine</code>: <code>GET</code>.</p>

    <div class="warning">
        <strong>Nota:</strong> O m√©todo GET √© um m√©todo do protocolo HTTP. Se n√£o me engano ele foi definido no HTTP/1.0, ent√£o pode ter certeza que esse m√©todo vai ser suportado por quase tudo huahu.
    </div>

    <p>O m√©todo GET do Gin pede como primeiro argumento um caminho para a rota. No caso colocamos o caminho como <code>/ping</code>. Quando nossa aplica√ß√£o estiver rodando, toda vez que ela receber um GET para /ping, ele vai executar o segundo argumento, que √© uma <code>gin.HandlerFunc</code>.</p>

    <p>Voc√™s podem olhar no c√≥digo do Gin o que √© uma HandlerFunc. Basicamente √© uma fun√ß√£o com essa sintaxe aqui: <code>HandlerFunc func(c *gin.Context)</code>. Ent√£o criamos uma fun√ß√£o an√¥nima (fun√ß√£o sem nome dentro de outra fun√ß√£o) com essa sintaxe, exatamente igual.</p>

    <p>Eu sempre achei a sintaxe de passar uma fun√ß√£o como argumento estranha huahua, ainda mais nesse jeito an√¥nimo que n√£o passamos nome nem nada haushas. O c√≥digo fica muito estranho com v√°rias chaves ({}), ent√£o √© normal se estranharem tamb√©m. Inclusive voc√™s poderiam criar essa fun√ß√£o fora e s√≥ usar ela, deixando mais f√°cil de ler e talvez entender:</p>

    <pre><code>// mesma coisa da outra mas n√£o an√¥nima 
func sendJSONPongHandler(c *gin.Context) {
    c.JSON(http.StatusOK, gin.H{
      "message": "pong",
    })
}

func main() {
  r := gin.Default()
  r.GET("/ping", sendJSONPongHandler) // mesma coisa
  r.Run() // listen and serve on 0.0.0.0:8080 (for windows "localhost:8080")
}</code></pre>

    <h3>A Fun√ß√£o Handler</h3>
    <p>Vamos dar uma olhadinha nessa fun√ß√£o haushasu, quase finalizando:</p>

    <pre><code>func sendJSONPongHandler(c *gin.Context) {
    c.JSON(http.StatusOK, gin.H{
      "message": "pong",
    })
}</code></pre>

    <p>Basicamente usamos o contexto do Gin. O contexto √© uma estrutura que encapsula tudo do HTTP e da requisi√ß√£o. Ele consegue enviar as respostas para o requisitante, consegue saber quem requisitou, consegue pegar metadados, e outras coisinhas.</p>

    <div class="warning">
        <strong>Curiosidade:</strong> Essa parada de contexto, se n√£o me engano, foi popularizada por um framework JavaScript chamado Express, ent√£o quando temos acesso ao contexto assim no framework dizemos que ele √© inspirado no Express ("Express-like") hauhau.
    </div>

    <p>Ent√£o usamos a fun√ß√£o de resposta do contexto, respondendo o request que recebemos na nossa rota <code>/ping</code>. Respondemos com um JSON que √© basicamente:</p>

    <pre><code>{
  "message": "pong"
}</code></pre>

    <div class="warning">
        <strong>Nota:</strong> Se voc√™s n√£o souberem o que √© um JSON podem perguntar tamb√©m.
    </div>

    <h3>Executando o Servidor</h3>
    <p>No final metemos um:</p>

    <pre><code>r.Run() // listen and serve on 0.0.0.0:8080 (for windows "localhost:8080")</code></pre>

    <p>Que √© basicamente pegar a engine que inicializamos e mandar ela ficar rodando. O Gin por padr√£o usa a porta <code>:8080</code> na rede.</p>

    <div class="warning">
        <strong>Coment√°rios:</strong> Eu esqueci de falar, mas isso aqui <code>//</code> em Go √© um coment√°rio. Tudo pra frente disso n√£o entra no programa compilado e √© totalmente ignorado, mas no Go voc√™ pode usar isso pra documentar o c√≥digo. √â importante saber usar os coment√°rios de forma inteligente - comentar tudo √© loucura tamb√©m. Com o tempo voc√™s v√£o construindo intui√ß√£o pra isso, mas tem umas regrinhas de ouro hasuhau.
    </div>

    <p>Isso de <strong>porta</strong> (port) voc√™s devem ter estudado em redes, mas se n√£o est√£o familiarizados com isso recebam o conhecimento:</p>
    <p><a href="https://www.cloudflare.com/pt-br/learning/network-layer/what-is-a-computer-port/" target="_blank">https://www.cloudflare.com/pt-br/learning/network-layer/what-is-a-computer-port/</a></p>

    <hr>

    <h2>Pronto, agora voc√™s j√° s√£o devs backend ou fullstack</h2>

    <p>Pra rodar essa parada voc√™s usam o compilador do Go. Basicamente abram um terminal e rodem <code>go run main.go</code>, ou <code>go run .</code>. O compilador √© esperto e vai encontrar a main, compilar, e rodar o c√≥digo na mesma hora.</p>

    <p>Servi√ßos web n√£o desligam muito (se desligar ou √© manuten√ß√£o ou deu ruim), ent√£o voc√™s precisam deixar o servi√ßo rodando para mandar requisi√ß√µes. Essa funcaozinha Run() j√° vai manter ele rodando pra sempre, √© basicamente um loop infinito que n√£o para ahsuhsa (ao menos que voc√™s desliguem o programa com CTRL+C ou matando o processo).</p>

    <p>Mas vamos testar agora! Voc√™s precisam de um programa para fazer requisi√ß√µes √† internet, um programa que consiga usar o protocolo HTTP pra isso. Existem muitos - de terminal tem o <code>wget</code> ou <code>curl</code> (curl √© super famoso e carrega nas costas quase tudo hasuhas). Mas como vamos fazer de uma forma visual e simples, voc√™s j√° t√™m um programa instalado que faz requisi√ß√µes GET f√°cil f√°cil hauhau: √© o navegador!</p>

    <p>Ent√£o basicamente acessem o IP local e entrem na porta 8080.</p>

    <p>S√≥ abrir esse link aqui se o programa estiver rodando:</p>
    <code>http://localhost:8080</code>

    <p>O navegador de voc√™s vai fazer um GET nesse IP e renderizar a resposta na tela.</p>

    <h3>(404 not found)</h3>
    <div class="warning">
        <strong>Enganei voc√™s hasdfuhasuf</strong> (na verdade eu sou burro). Ent√£o, essa rota que eu passei pra voc√™s √© onde a aplica√ß√£o t√° rodando. Quando voc√™s tentarem acessar ela, o nosso framework √© esperto e n√£o vai achar uma rota pra isso, e vai dar o 404 automaticamente. A rota que criamos nesse programa √© <code>/ping</code>, ent√£o voc√™s precisam acessar: <code>http://localhost:8080/ping</code>
    </div>

    <div class="success">
        <strong>Se estiver tudo certo, deu boa!</strong>
    </div>

    <div class="warning">
        <strong>Sobre redes:</strong> Essa parada de redes voc√™s v√£o estudar na faculdade tamb√©m, ent√£o se voc√™s fizerem podem ficar tranquilos que v√£o estudar haushas. Mas se quiserem aprender um pouco agora e por fora, vou passar o basic√£o aqui do que voc√™s v√£o precisar entender.
    </div>

    <h2>Links √öteis</h2>

    <h3>M√©todos HTTP:</h3>
    <p><a href="https://developer.mozilla.org/pt-BR/docs/Web/HTTP/Methods" target="_blank">https://developer.mozilla.org/pt-BR/docs/Web/HTTP/Methods</a></p>

    <h3>O que √© uma API REST (o que come√ßamos a fazer):</h3>
    <p><a href="https://www.redhat.com/pt-br/topics/api/what-is-a-rest-api" target="_blank">https://www.redhat.com/pt-br/topics/api/what-is-a-rest-api</a></p>

    <h3>Livro (se forem malucos hasuhas):</h3>
    <p>Provavelmente v√£o ver isso na faculdade. N√£o recomendo comprarem pq √© caro ashuhas e tem mais coisa do que voc√™s precisam saber agora. Mas caso algum dia estiverem no hype de ler um livro de programa√ß√£o sobre redes da grossura de um tijolo, fica a√≠ a recomenda√ß√£o:</p>
    <p><a href="https://archive.org/details/tanenbaum-rede-de-computadores-6a/mode/2up" target="_blank">Redes de Computadores - Tanenbaum</a></p>

    <div class="warning">
        <strong>Aviso:</strong> Enfim, esse livro a√≠ j√° vai do come√ßo at√© o final, e um j√∫nior hoje em dia n√£o precisa saber de tudo isso hauhsa. Mas talvez voc√™s vejam esse livrinho na faculdade, ent√£o joguei ele a√≠ tamb√©m.
    </div>

    <hr>

    <div class="success">
        <strong>√â isso a√≠ galera, mandaram bem!</strong> Deem uma lida a√≠ no que deixei de link (menos o livro hdfuashfudha). Acho que a pr√≥xima coisa que vamos fazer √© o banco de dados, mas t√¥ pensando ainda haushas. Por agora fico a√≠ pra d√∫vidas.
    </div>
</body>
</html>